<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy birthday</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <style>
        /* ======================================================= */
        /* === BASE STYLES & PC OPTIMIZATION (Original + Refined) === */
        /* ======================================================= */
        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            overflow-x: hidden; /* NGĂN CHẶN SCROLL HORIZONTAL */
            overflow-y: auto;
        }

        #wrapper {
            position: relative;
            box-shadow: 0 0 20px rgba(255, 182, 193, 0.5);
            min-height: 100vh;
            overflow-x: hidden; /* NGĂN CHẶN SCROLL HORIZONTAL */
            display: flex;
            flex-direction: column;
            align-items: center; /* Căn giữa nội dung theo chiều ngang */
        }
        
        .content {
            box-shadow: inset 0 0 50px rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            margin: 20px 10px;
            padding: 20px;
            display: flex;
            flex: 1;
            flex-direction: row; /* Mặc định row cho PC */
            justify-content: space-around;
            align-items: center;
            width: 95%; /* Đảm bảo content không quá rộng */
            max-width: 1200px;
        }

        .left, .right {
            flex-basis: 45%;
        }

        .title h1 {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 3em;
            color: #ff69b4;
        }

        .btn.mail button {
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            color: white;
            font-size: 1.2em;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            transition: transform 0.3s;
        }
        .btn.mail button:hover {
            transform: scale(1.05);
        }

        /* Hello Kitty Jumping (Vị trí Absolute trên PC) */
        .hello-kitty {
            position: absolute;
            top: 20%;
            right: 10%;
            z-index: 10;
            animation: float 3s ease-in-out infinite;
            background: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.8));
        }
        .hello-kitty img {
            width: 150px;
            height: auto;
            max-width: 100%;
            height: auto;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Hello Kitty Corners (Vị trí Absolute trên PC) */
        .hello-kitty-tl, .hello-kitty-tr, .hello-kitty-bl, .hello-kitty-br {
            position: absolute;
            z-index: 10;
            filter: drop-shadow(0 0 8px rgba(255, 105, 180, 0.6));
            background: transparent;
        }
        .hello-kitty-tl { top: 5%; left: 5%; animation: bounce 2.5s ease-in-out infinite; }
        .hello-kitty-tr { top: 5%; right: 5%; animation: float-corner 3s ease-in-out infinite; }
        .hello-kitty-bl { bottom: 5%; left: 5%; animation: wave 4s ease-in-out infinite; }
        .hello-kitty-br { bottom: 5%; right: 5%; animation: spin-float 5s linear infinite; }
        .hello-kitty-tl img, .hello-kitty-tr img, .hello-kitty-bl img, .hello-kitty-br img {
            height: auto;
            max-width: 100%;
        }

        /* Name styling */
        .name {
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
        .name span {
            font-size: 1.8em;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            margin: 0 10px;
            animation: subtleBlink 3s ease-in-out infinite;
        }
        .name i {
            color: #ff1493;
            font-size: 1.5em;
            animation: heartBeat 1.5s ease-in-out infinite;
        }
        
        /* Căn chỉnh cờ/banner */
        .flag__birthday {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .flag__birthday img {
            width: 40%;
            max-width: 350px;
            height: auto;
        }

        /* ======================================================= */
        /* === MOBILE OPTIMIZATION (Dưới 768px) - FIXED === */
        /* ======================================================= */
        @media (max-width: 768px) {
            body {
                overflow-x: hidden;
            }

            #wrapper {
                padding-top: 10px; 
            }

            /* 1. Ẩn/Quản lý Hello Kitty góc và các vật trang trí khác */
            .hello-kitty-tl, .hello-kitty-tr, .hello-kitty-bl, .hello-kitty-br,
            .decorate_star, .decorate_flower--one, .decorate_flower--two, .decorate_flower--three,
            .decorate_bottom, .smiley__icon {
                 display: none !important; /* Ẩn các phần tử trang trí gây tràn hoặc thừa thãi */
            }

            /* 2. Căn chỉnh lại khối nội dung chính: Xếp chồng và Căn giữa */
            .content {
                flex-direction: column !important; /* Xếp chồng theo chiều dọc */
                text-align: center;
                margin: 10px auto; /* Căn giữa ngang */
                padding: 15px;
                width: 95%; /* Chiếm phần lớn màn hình */
                box-sizing: border-box; /* Đảm bảo padding không gây tràn */
            }

            .left, .right {
                width: 100%; /* Chiếm toàn bộ chiều rộng */
                margin-bottom: 20px;
                /* Thêm flex để căn giữa nội dung con trong khối */
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            /* 3. Hello Kitty nhảy (Giảm kích thước và điều chỉnh vị trí) */
            .hello-kitty {
                position: relative; /* Chuyển sang relative để nằm trong luồng .right */
                top: auto;
                right: auto;
                margin: 15px 0; /* Thêm khoảng cách */
                animation: float 3s ease-in-out infinite; /* Giữ animation */
            }
            .hello-kitty img {
                width: 100px; /* Giảm kích thước */
            }

            /* 4. Tiêu đề và nút bấm */
            .title h1 {
                font-size: 2em; 
            }
            .date__of__birth {
                margin: 10px 0 20px;
            }
            .btn.mail button {
                padding: 10px 20px;
                font-size: 1em;
            }

            /* 5. Căn chỉnh Cờ/Banner */
            .flag__birthday {
                gap: 5px;
                padding: 0 5px;
                flex-wrap: wrap; 
                margin-bottom: 15px;
            }
            .flag__birthday img {
                width: 45% !important; /* Cho phép co giãn */
                min-width: 130px;
            }

            /* 6. Ảnh và Tên */
            .box__account .image img {
                width: 150px;
                max-width: 80%;
                bottom: -10px;
            }
            .name {
                white-space: normal; /* Cho phép xuống dòng nếu tên quá dài */
                flex-wrap: wrap;
            }
            .name span {
                font-size: 1.5em;
            }

            /* 7. Bóng bay (Tùy chọn: Ẩn hoặc giữ lại ở vị trí ít gây ảnh hưởng) */
            .balloon_one, .balloon_two {
                position: absolute;
                opacity: 0.8;
                top: 0;
            }
            .balloon_one { left: 10px; }
            .balloon_two { right: 10px; }
            .balloon_one img, .balloon_two img {
                width: 60px;
            }

            /* 8. Vòng tròn chữ */
            .cricle {
                transform: scale(0.8);
                margin-top: 15px;
            }
            .cricle .text__cricle {
                font-size: 0.8em;
            }

            /* 9. Modal và Letter Box */
            #nameModal .modal-content, .box__letter .letter__border {
                width: 90% !important;
                max-width: 90% !important;
                margin: 0 auto;
                padding: 15px;
            }
            .content__letter {
                flex-direction: column;
            }
            .love__img img {
                width: 120px;
            }
        }

        /* Tối ưu cho màn hình rất nhỏ (dưới 480px) */
        @media (max-width: 480px) {
            .title h1 {
                font-size: 1.5em;
            }
            .name span {
                font-size: 1.2em;
            }
            .cricle {
                transform: scale(0.7);
            }
            .flag__birthday img {
                width: 100px !important;
                min-width: 100px;
            }
            .hello-kitty img {
                width: 70px;
            }
            .text__letter p {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <canvas id="confetti-canvas"></canvas> <div id="wrapper">
        <div class="hello-kitty-tl">
            <img src="images/hellokiity4.gif" alt="Hello Kitty Top Left">
        </div>
        <div class="hello-kitty-tr">
            <img src="images/hello-kitty-sticker-15.gif" alt="Hello Kitty Top Right">
        </div>
        <div class="hello-kitty-bl">
            <img src="images/hello-kitty-sticker-18.gif" alt="Hello Kitty Bottom Left">
        </div>
        <div class="hello-kitty-br">
            <img src="images/hellokitty6.gif" alt="Hello Kitty Bottom Right">
        </div>

        <div id="nameModal" class="modal">
            <div class="modal-content">
                <h2>Vợ nhập tên đi</h2>
                <input type="text" id="nameInput" placeholder="Nhập tên">
                <button id="submitName">Xác nhận</button>
            </div>
        </div>
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content" style="display:none;">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">
                            y
                            <div class="hat">
                                <img src="./images/hat.png" alt="" width="130">
                            </div>
                        </span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>


                <div class="btn mail">
                    <button id="btn__letter">
                       Ấn vào đây đi vợ 😒
                        <i class="fa-regular fa-envelope"></i>
                    </button>
                </div>

            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img style="position: relative; bottom:-25px;" src="./images/z7069593462920_4503e4c1f882e39317e12d5dcb5be64d.jpg" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Nguyễn Phương Anh</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="hello-kitty">
                    <img src="images/icegif-516.gif" alt="Hello Kitty Jumping">
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">h</span>
                        <span style="--i: 2;">a</span>
                        <span style="--i: 3;">p</span>
                        <span style="--i: 4;">p</span>
                        <span style="--i: 5;">y</span>
                        <span style="--i: 6;">-</span>
                        <span style="--i: 7;">b</span>
                        <span style="--i: 8;">i</span>
                        <span style="--i: 9;">r</span>
                        <span style="--i: 10;">t</span>
                        <span style="--i: 11;">h</span>
                        <span style="--i: 12;">d</span>
                        <span style="--i: 13;">a</span>
                        <span style="--i: 14;">y</span>
                        <span style="--i: 15;">-</span>
                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
                <span class="day">
                    
                </span>
                <span class="month"></span>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>

        

        <div class="box__letter">
            <div class="letter__border">
                <div class="letter">
                    <div class="title__letter">
                    </div>
                    <div class="content__letter">
                        <div class="left">
                            <img id="heart__letter" src="./images/heart_letter.png" alt="">
                            <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_4" style="--t: 0.8s" width="20" src="./images/heart.png" alt="">
                        </div>
                        <div class="right">
                            <div class="love__img">
                                <img src="./images/love.png" alt="" width="220">
                            </div>
                            <div class="text__letter">
                                 <p></p>
                            </div>
                            <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
                        </div>
                    </div>
                </div>
                <div class="close">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    let datetxt = "2 - 10 - 2009";
    let datatxtletter = "";
    let titleLetter = " ";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    let userName = "";

    setTimeout(function(){
        timeDatetxt = setInterval(function(){
            if(currentIndex < charArrDate.length){
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else{
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        },100)
    },12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function(){
        $(".box__letter").slideDown()
        setTimeout(function(){
            $(".letter__border").slideDown();
        },1000)
        setTimeout(function(){
            intervalTitle = setInterval(function(){
                if(currentIndexTitle < charArrTitle.length){
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart"
                    document.querySelector(".title__letter").appendChild(i)
                    currentIndexTitle++;
                }
                else{
                    clearInterval(intervalTitle)
                }
            },100)
        },2000)
        setTimeout(function(){
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        },2800)
        setTimeout(function(){
            document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.add("animation")
            })
        },3500)
        setTimeout(function(){
            intervalContent = setInterval(function(){
                if(currentIndexLetter < charArrDateLetter.length){
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                }
                else{
                    clearInterval(intervalContent)
                }
            },50)
        },6000)
    })
    $(".close").on("click", function(){
        clearInterval(intervalContent)
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0
        currentIndexTitle = 0
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.remove("animation")
            })
        $(".box__letter").slideUp();
        $(".letter__border").slideUp();
    })

   function updateLetterContent() {
    titleLetter = `Gửi ${userName}, `;
    datatxtletter = `Hôm nay là sinh nhật của nhóc. Anh chúc nhóc tuổi mới thật nhiều niềm vui, ngày càng xinh đẹp, đáng iu, ngol và học giỏi hơn nữa nhé. 16 tuổi rồi, không còn bé nữa đâu nhưng với anh, Bông mãi là em bé đáng yêu nhất trên đời của anh. Anh yêu em nhiều lắm ❤️ Happy Birthday, my one and only!`;
    charArrTitle = titleLetter.split('');
    charArrDateLetter = charArrTitle.concat(datatxtletter.split(''));
}


    $('#submitName').on('click', function() {
        userName = $('#nameInput').val();
        if (userName) {
            $('#nameModal').hide();
            $('.content').show();
            updateLetterContent();
        } else {
            alert('Vui lòng nhập tên của bạn.');
        }
    });

    //mobile

    function mobile(){
        const app = {
            timeout: function(txt, dom){
                let currentIndex = 0;
                let charArr = txt.split('')
                intervalMobile = setInterval(function(){
                    if(currentIndex < charArr.length){
                        dom.textContent += charArr[currentIndex];
                        currentIndex++;
                    }
                    else{
                        clearInterval(intervalMobile)
                    }
                },200)
            }
        }
        return app
    }
    const fcMobile = mobile()
    if(window.innerWidth < 768){
        setTimeout(()=>{
            fcMobile.timeout("26", document.querySelector(".day"))
        },5000)
        setTimeout(()=>{
            fcMobile.timeout("10", document.querySelector(".month"))
        },6000)
    }
    
</script>

<script>
    window.onload = function() {  
        var audio = document.getElementById('myAudio');  
        audio.play().catch(function(error) {  
            console.log("Không thể tự động phát âm thanh: ", error);  
        });  
        // Bắt đầu pháo hoa khi load trang, dừng sau 10 giây
        if (typeof confettiBurst === 'function') {
            confettiBurst();
            setTimeout(() => {
                if (typeof stopConfetti === 'function') {
                    stopConfetti();
                }
            }, 10000);
        }
    };  
</script>

<audio id="myAudio" loop autoplay>  
<source src="./ytmp3free.cc_happy-birthday-piano-instrumental-by-hsc501-youtubemp3free.org.mp3" type="audio/mpeg">  
</audio> 

</html>